# ğŸ  My Dotfiles

Personal dotfiles configuration for a streamlined and automated development environment, with a strong focus on integration with the Zed editor.

## ğŸš€ Installation

### Prerequisites

Ensure you have the following tools installed on your system:

* `git`
* `zsh`
* `curl`
* A C compiler (e.g., `cc`, `gcc`, or `clang`)
* `tree`
* `xclip` (for Linux) or `pbcopy` (for macOS)

### Setup Instructions

1.	**Clone the repository:**
	```bash
	git clone git@github.com:qvanderlaan/.dotfiles.git ~/.dotfiles
	```

2.	**Run the setup script:**
	This will configure your global `.gitignore` and link the Zed editor settings.
	```bash
	~/.dotfiles/Commands/setup_dotfiles
	```

3.	**Link or Source `.zshrc`:**

	**Option A - Create a symlink (recommended):** This replaces your current `.zshrc`.
	```bash
	ln -sf ~/.dotfiles/.zshrc ~/.zshrc
	```

	**Option B - Source in your existing `.zshrc`:** Add this line to the end of your `~/.zshrc`.
	```bash
	echo "source ~/.dotfiles/.zshrc" >> ~/.zshrc
	```

4.	**Reload your shell:**
	Apply the changes by restarting your terminal or running:
	```bash
	source ~/.zshrc
	```


## âš™ï¸ Configuration

To personalize the file headers generated by `stdheader`, you need to edit the `config.json` file:

**File:** `~/.dotfiles/config.json`

```json
{
	"CodamHeader": {
		"length": 80,
		"margin": 2,
		"email": "qvan-der@student.codam.nl",
		"username": "qvan-der",
		"asciiart": [
			"       ::::::::         ",
			"     :+:    :+:         ",
			"    +:+                 ",
			"   +#+                  ",
			"  +#+                   ",
			"#+#    #+#              ",
			"########   odam.nl      "
		],
		"autoinsert": true
	}
}
```

-   **`email`**: Your email address.
-   **`username`**: Your username.

## Zed Editor Integration

These dotfiles provide deep integration with the [Zed](https://zed.dev/) editor for a fully automated formatting workflow.

-   **Automatic Formatting on Save**: C and Makefile files are automatically formatted every time you save them.
-   **Custom Header Generation**: A standardized header (configured in `config.json`) is automatically added or updated in your C files and Makefiles.
-   **How it Works**: The `zed_settings.json` file is configured to use the custom scripts in this repository (`format_42_c` and `stdheader`) as external formatters.

## ğŸ› ï¸ Included Commands

The following custom commands are added to your `$PATH` and are available system-wide.

| Command | Description |
| --- | --- |
| `add_flags` | Creates a `compile_flags.txt` symlink for C projects. |
| `copy_changes` | Copies the output of `git diff` to the system clipboard. |
| `copy_context` | Compiles and runs a C program that copies all project text files (respecting `.gitignore`) to the clipboard. Useful for providing context to LLMs. |
| `cursor` | Installs, updates, and launches the Cursor editor. Use `cursor --install` or `cursor --update`. |
| `nah` | A safe wrapper for `git reset --hard` that asks for confirmation before deleting your changes. |
| `setup_dotfiles` | Sets up global gitignore and symlinks Zed settings. |
| `stdheader` | A powerful script to add or update standardized file headers based on rules in `config.json`. |

## ğŸ“ Project Structure

*   **`/Commands`**: Contains all the global command scripts.
*   **`/Formatters`**: Code formatting scripts designed to be used by the Zed editor.
*   **`/Helpers`**: Helper scripts and source code (`colors.sh`, `copy_context.c`) used by the main commands.
*   **`/Storage`**: Stores configuration files, templates, and settings (`zed_settings.json`, `compile_flags.bck`).
*   **`config.json`**: User-specific configuration for custom headers.

## ğŸ¯ Usage Examples

```bash
# Compile with strict flags
comp myfile.c -o myfile

# Check code style
norm myfile.c

# Copy current changes to clipboard
copy_changes

# Copy entire project context to clipboard
copy_context

# Install/update Cursor editor
cursor --install
cursor --update

# Reset git changes safely
nah

# Open Cursor editor
cursor
cursor myproject/
```

## ğŸ“‹ `copy_context`

The `copy_context` command compiles and runs a small C utility that copies the contents of all text files in your project (ignoring `.gitignore` rules) into your clipboard.
This is especially useful for providing full project context to LLMs without manual copy-pasting.

### ğŸ”‘ Options

| Flag | Description |
|------|-------------|
| `--strip-indent` | Remove leading spaces/tabs from each line of text before copying. |
| `--rebuild` | Force recompilation of the C program, even if the binary is up-to-date. |
| `-h`, `--help` | Show usage information and exit. |
| `--status` | Show a status dashboard (OS, clipboard availability, binary build info). |

### ğŸ’» System Support

- **macOS** â†’ requires `pbcopy` & `cc`
- **Linux** â†’ requires `xclip` & `cc`

### ğŸ–¥ï¸ Example Help Output

```bash
copy_context --help
```

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             copy_context â€“ Helper
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– Usage:
  copy_context.sh [OPTIONS]

Options:
  --strip-indent    Remove leading spaces/tabs from each line
  --rebuild         Force recompilation of the C program
  -h, --help        Show this help message and exit
  --status          Show system + build status only

âš™ï¸  Behavior:
  - Collects all text files under current directory
    (using 'tree -if --gitignore')
  - Pipes their contents into your clipboard

ğŸ–¥ï¸  System Info:
âœ… macOS detected â€“ pbcopy available

ğŸ”¨ Build Status:
  Binary: /Users/you/.dotfiles/Builds/copy_context
  Built on: 2025-10-04 12:31:45
  Source last modified: 2025-10-04 12:20:10
âœ… Binary is up-to-date

ğŸ’¡ Examples:
  copy_context
  copy_context --strip-indent
  copy_context --rebuild --strip-indent
```
